//control a satellite receiver by sending infrared (IR) commands to change the channel
PROGRAM_NAME = 'sat'


DEFINE_CONSTANT

CHAR SatCmdStrs[][300] =
{
    '344,170,22,20,22,20,22,20,22,20,22,20,22,63,22,20,22,20,22,20,22,20,22,20,22,63,22,20,22,20,22,20,22,20,22,63,22,63,22,63,22,20,22,20,22,20,22,63,22,20,22,20,22,20,22,20,22,63,22,63,22,63,22,20,22,63,22,1776,344,85,22,760', // Btn0
    '344,170,22,20,22,20,22,20,22,20,22,20,22,63,22,20,22,20,22,20,22,20,22,20,22,63,22,20,22,20,22,20,22,20,22,20,22,20,22,63,22,63,22,63,22,20,22,20,22,20,22,63,22,63,22,20,22,20,22,20,22,63,22,63,22,63,22,1776,344,85,22,760', // Btn1
    '344,170,22,20,22,20,22,20,22,20,22,20,22,62,22,20,22,20,22,20,22,20,22,20,22,62,22,20,22,20,22,20,22,20,22,62,22,20,22,62,22,62,22,62,22,20,22,20,22,20,22,20,22,62,22,20,22,20,22,20,22,62,22,62,22,62,22,1776,344,85,22,760', // Btn2
    '344,170,22,20,22,20,22,20,22,20,22,20,22,63,22,20,22,20,22,20,22,20,22,20,22,63,22,20,22,20,22,20,22,20,22,20,22,63,22,63,22,63,22,63,22,20,22,20,22,20,22,63,22,20,22,20,22,20,22,20,22,63,22,63,22,63,22,1775,344,85,22,760', // Btn3
    '344,170,22,20,22,20,22,20,22,20,22,20,22,63,22,20,22,20,22,20,22,20,22,20,22,63,22,20,22,20,22,20,22,20,22,20,22,20,22,20,22,20,22,20,22,20,22,63,22,20,22,63,22,63,22,63,22,63,22,63,22,63,22,20,22,63,22,1776,344,85,22,760', // Btn4
    '344,172,22,20,22,20,22,20,22,20,22,20,22,63,22,20,22,20,22,20,22,20,22,20,22,63,22,20,22,20,22,20,22,20,22,63,22,20,22,20,22,20,22,20,22,20,22,63,22,20,22,20,22,63,22,63,22,63,22,63,22,63,22,20,22,63,22,1782,344,85,22,760', // Btn5
    '344,170,22,20,22,20,22,20,22,20,22,20,22,63,22,20,22,20,22,20,22,20,22,20,22,63,22,20,22,20,22,20,22,20,22,20,22,63,22,20,22,20,22,20,22,20,22,63,22,20,22,63,22,20,22,63,22,63,22,63,22,63,22,20,22,63,22,1776,344,85,22,760', // Btn6
    '344,171,22,20,22,20,22,20,22,20,22,20,22,63,22,20,22,20,22,20,22,20,22,20,22,63,22,20,22,20,22,20,22,20,22,20,22,20,22,63,22,20,22,20,22,20,22,63,22,20,22,63,22,63,22,20,22,63,22,63,22,63,22,20,22,63,22,1776,344,85,22,760', // Btn7
    '344,170,22,20,22,20,22,20,22,20,22,20,22,62,22,20,22,20,22,20,22,20,22,20,22,62,22,20,22,20,22,20,22,20,22,62,22,20,22,62,22,20,22,20,22,20,22,62,22,20,22,20,22,62,22,20,22,62,22,62,22,62,22,20,22,62,22,1776,344,84,22,760', // Btn8
    '344,170,22,20,22,20,22,20,22,20,22,20,22,62,22,20,22,20,22,20,22,20,22,20,22,62,22,20,22,20,22,20,22,20,22,20,22,62,22,62,22,20,22,20,22,20,22,62,22,20,22,62,22,20,22,20,22,62,22,62,22,62,22,20,22,62,22,1775,344,85,22,760'  // Btn9
};


DEFINE_VARIABLE

VOLATILE INTEGER SatChnIndxDigit1;
VOLATILE INTEGER SatChnIndxDigit2;
VOLATILE INTEGER SatChnIndxDigit3;
    

DEFINE_CALL 'SetSatChn' (INTEGER SatChnIndx)
{
    SatChnIndxDigit1 = SatChnIndx / 100;
    SatChnIndxDigit2 = (SatChnIndx - SatChnIndxDigit1 * 100) / 10;
    SatChnIndxDigit3 = SatChnIndx - SatChnIndxDigit1 * 100 - SatChnIndxDigit2 * 10;
    
    CALL 'SendGcIrCmd' (2, 1, 38000, 1, 1, SatCmdStrs[SatChnIndxDigit1 + 1]);
    WAIT (3) { CALL 'SendGcIrCmd' (2, 1, 38000, 1, 1, SatCmdStrs[SatChnIndxDigit2 + 1]);
    WAIT (3) { CALL 'SendGcIrCmd' (2, 1, 38000, 1, 1, SatCmdStrs[SatChnIndxDigit3 + 1]); } }
}
